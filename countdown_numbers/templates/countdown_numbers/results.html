{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% load template_helpers %}

{% block title %}{{ block.super }} | Countdown Numbers | Results{% endblock title %}

{% block content %}
  <section class="cta-section theme-bg-light py-5">
    <div class="container single-col-max-width">
      {% include 'countdown_numbers/components/game_title.html' %}
    </div>
  </section>
  <section class="project px-3 py-5 p-md-5">
    <div class="container">
      <div class="project-meta media flex-column flex-md-row p-4 theme-bg-light">
        <div class="media-body text-center">
          <!--- Target Number -->
          <div class="d-flex flex-column col-5 mb-1 offset-lg-4" style="font-size: xx-large;">
            <blockquote class="quote-content">
              <h6 class="font-weight-bold text-left mb-1 lead">Target Number</h6>
              <div class="alert alert-primary" role="alert">
                {{ request.GET.target_number }}
              </div>
            </blockquote>
          </div>
          <!--- Game Numbers -->
          <div class="d-flex flex-column col-5 mb-1 offset-lg-4" style="font-size: xx-large;">
            <blockquote class="quote-content">
              <h6 class="font-weight-bold text-left mb-1 lead">Game Numbers</h6>
              <div class="alert alert-primary" role="alert">
                {{ request.GET.numbers_chosen|remove_brackets }}
              </div>
            </blockquote>
          </div>
          <!--- Your Calculation -->
          <div class="d-flex flex-column col-5 mb-1 offset-lg-4" style="font-size: large;">
            <blockquote class="quote-content">
              <h6 class="font-weight-bold text-left mb-1 lead">Your Calculation</h6>
              <div class="alert alert-primary" role="alert">
                {{ request.GET.players_calculation|add_spacing|change_symbols }} = {{ player_num_achieved }}
              </div>
            </blockquote>
          </div>
          <!--- Rachel's Calculation -->
          <div class="d-flex flex-column col-5 mb-1 offset-lg-4" style="font-size: large;">
            <blockquote class="quote-content">
              <h6 class="font-weight-bold text-left mb-1 lead">Rachel's Calculation</h6>
              <div class="alert alert-primary" role="alert">
                {{ solution_str }}
              </div>
            </blockquote>
          </div>
          <!--- Game Results -->
          <div class="d-flex flex-column col-5 mb-1 offset-lg-4">
            <blockquote class="quote-content">
              <h6 class="font-weight-bold text-left mb-1 lead">Game Results</h6>
              <div class="alert alert-primary text-left" role="alert">
                {% if valid_calc %}
                  <i class="fa fa-chevron-right"></i> You scored {{ player_score }} points<br>
                {% else %}
                  <i class="fa fa-chevron-right"></i> Your answer is <u>not</u> valid, therefore you scored no points<br>
                {% endif %}
                  <i class="fa fa-chevron-right"></i> Rachel scored {{ comp_score }} points<br>
                  <i class="fa fa-chevron-right"></i> <strong>Result: </strong>
                  {% if game_result == 'comp_num_achieved' %}
                    Rachel wins
                  {% elif game_result == 'player_num_achieved' %}
                    You win
                  {% else %}
                    {{ game_result }}
                  {% endif %}
              </div>
            </blockquote>
          </div>
          <!--- Cheeky Message -->
          <div class="d-flex flex-column col-5 mb-1 offset-lg-4">
            <blockquote class="quote-content">
              <strong>
                {% if player_score > comp_score %}
                  Wow, you did great! Congratulations!!
                {% elif comp_score > player_score %}
                  You must try harder to beat our resident mathematician!
                {% else %}
                  Impressive. You went toe-to-toe with Rachel! Keep at it!
                {% endif %}
              </strong>
            </blockquote>
          </div>
          <!-- Buttons and Links -->
          <div class="d-flex flex-column col-5 mb-1 offset-lg-4 mt-1">
            <button type="cancel" class="btn btn-sm btn-success mt-3" 
              onclick="window.location='{% url 'countdown_numbers:selection' %}';return false;">
              <i class="fa fa-repeat"></i>
              Start Again
            </button>
            <!--- View Code on GitHub Button -->
            <button type="submit" class="btn btn-sm btn-dark mt-2" 
              onclick="window.open('https://github.com/WayneLambert/portfolio/blob/master/countdown_numbers/views.py', '_blank')">
              <i class="fa fa-github"></i>
              View Code
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock content %}