{% extends 'base.html' %}

{% load static %}
{% load widget_tweaks %}
{% load i18n %}

{% block extra_head %}
  <title>{% block title %}{{ block.super }} | Two-Factor Setup{% endblock title %}</title>
{% endblock extra_head %}

{% block content %}
  <div class="container col-6 py-5">
    <div class="auth-wrapper theme-bg-light mx-auto shadow p-5 rounded">
      <h5 class="mt-2 mb-3">Enable Two-Factor Authentication</h5>
      {% if wizard.steps.current == 'generator' %}
        <small class="text-muted mb-3">
          {% blocktrans trimmed %}
            <p>
              To start using a token generator, please use your smartphone
              to scan the QR code below. For example, use an app like
              Google Authenticator or Microsoft Authenticator.
            </p>
            <p>Once done, enter the token generated by the app.</p>
          {% endblocktrans %}
        </small>
        <p class="text-center">
          <img src="{{ QR_URL }}" alt="QR Code" />
        </p>
        <form action="" method="POST">
          {% csrf_token %}

          <table class="mb-3">
            {{ wizard.form }}
            {{ wizard.management_form }}
          </table>

          {# hidden submit button to enable [enter] key #}
          <input type="submit" value="" class="d-none" />

          {% include "two_factor/wizard_actions.html" %}
        </form>
      {% endif %}
    </div>
  </div>
{% endblock %}